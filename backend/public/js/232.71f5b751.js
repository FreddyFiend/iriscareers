"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[232],{7232:(s,e,o)=>{o.r(e),o.d(e,{default:()=>F});var i=o(9835),l=o(6970);const t={class:"row justify-center",style:{"min-height":"100vh"}},n={key:0,class:"q-ma-sm q-pa-md col-12 bg-white shadow-6",style:{"max-width":"500px"}},d={class:"professions"},r=(0,i._)("h5",null,"Professions",-1),a={class:"buttons float-right"},u=(0,i._)("br",null,null,-1),h={class:"text-h6 q-py-md"},c=(0,i._)("div",{class:"text-subtitle2"},"Areas of work:",-1),p={class:"text-subtitle2"},m=(0,i.Uk)(" Skill: "),f=(0,i.Uk)("Add "),g=(0,i._)("div",{class:"q-px-md text-h6"},"What is your Profession?",-1),w=(0,i._)("div",{class:"q-px-md text-h6"},"What are your skills?",-1),k={class:"q-pa-md"},b=(0,i._)("div",{class:"q-pa-sm text-subtitle2"}," What is your skill level in this field? ",-1),q={class:"q-gutter-y-md column"},y={class:"q-pa-sm"};function P(s,e,o,P,v,_){const M=(0,i.up)("q-btn"),U=(0,i.up)("q-page-sticky"),x=(0,i.up)("q-chip"),C=(0,i.up)("q-rating"),W=(0,i.up)("q-select"),V=(0,i.up)("q-form");return(0,i.wg)(),(0,i.iD)("div",t,[(0,i.Wm)(U,{position:"top-left",offset:[18,18],onClick:e[0]||(e[0]=e=>s.$router.push(`/profile/${this.store.user.slug}`))},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{fab:"",icon:"arrow_back",color:"primary"})])),_:1}),s.showProfessions?((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",d,[r,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.user.professions,((e,o)=>((0,i.wg)(),(0,i.iD)("div",{class:"q-pa-md",key:o},[(0,i._)("div",a,[(0,i.Wm)(M,{class:"q-ma-sm",icon:"edit",onClick:o=>s.editProfession(e)},null,8,["onClick"]),u,(0,i.Wm)(M,{class:"q-ma-sm",icon:"delete",onClick:o=>s.deleteProfession(e)},null,8,["onClick"])]),(0,i._)("div",h,(0,l.zw)(e.profession),1),c,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.subProfession,((s,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(s),1)])),_:2},1024)])))),128)),(0,i._)("div",p,[m,(0,i.Wm)(C,{modelValue:e.skillLevel,"onUpdate:modelValue":s=>e.skillLevel=s,size:"1.5em",color:"primary",readonly:""},null,8,["modelValue","onUpdate:modelValue"])])])))),128))]),s.professionsLength<3?((0,i.wg)(),(0,i.j4)(M,{key:0,class:"q-ma-md",onClick:e[1]||(e[1]=e=>{s.showAddProfession=!s.showAddProfession,s.showProfessions=!s.showProfessions})},{default:(0,i.w5)((()=>[f])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),s.showAddProfession?((0,i.wg)(),(0,i.j4)(V,{key:1,onSubmit:s.onSubmit,class:"q-ma-sm q-pa-md col-12 bg-white shadow-6",style:{"max-width":"500px"}},{default:(0,i.w5)((()=>[g,(0,i.Wm)(W,{outlined:"",class:"q-pa-md",modelValue:s.professionModel,"onUpdate:modelValue":e[2]||(e[2]=e=>s.professionModel=e),"use-input":"","input-debounce":"0",label:"Profession",options:s.options,onFilter:s.filterFn,behavior:"menu"},null,8,["modelValue","options","onFilter"]),w,(0,i.Wm)(W,{label:"Skills required ",outlined:"",class:"q-pa-md",modelValue:s.skillsModel,"onUpdate:modelValue":e[3]||(e[3]=e=>s.skillsModel=e),"use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique","lazy-rules":"",rules:[s=>s&&s.length>0&&s.length<8||"Please add between 1 to 8 skills"]},null,8,["modelValue","rules"]),(0,i._)("div",k,[b,(0,i._)("div",q,[(0,i.Wm)(C,{modelValue:s.ratingModel,"onUpdate:modelValue":e[4]||(e[4]=e=>s.ratingModel=e),size:"3em",color:"grey","color-selected":s.ratingColors},null,8,["modelValue","color-selected"])])]),(0,i._)("div",y,[(0,i.Wm)(M,{rounded:"",outlined:"","text-color":"primary","bg-color":"white",label:"Done",type:"submit",color:"white "}),(0,i.Wm)(M,{rounded:"",outlined:"","text-color":"primary","bg-color":"white",label:"Cancel",onClick:s.cancelEdit,color:"white "},null,8,["onClick"])])])),_:1},8,["onSubmit"])):(0,i.kq)("",!0)])}var v=o(499),_=o(1569),M=o(908),U=o.n(M),x=o(861),C=o(9302);const W=(0,i.aZ)({name:"addProfession",setup(){const s=(0,x.E)(),e=(0,C.Z)(),o=(0,v.iH)(U());let i=[];const l=(0,v.iH)(i);return{store:s,q:e,ratingModel:(0,v.iH)(1),ratingColors:["blue-2","blue-4","blue-6","blue-8","blue-10"],showAddProfession:(0,v.iH)(!1),showProfessions:(0,v.iH)(!0),isUpdate:(0,v.iH)(!1),professionId:(0,v.iH)(null),skillsModel:(0,v.iH)(null),profession:(0,v.iH)(null),filterOptions:l,professionModel:(0,v.iH)(null),professionOptions:U(),options:o}},methods:{onSubmit(){this.isUpdate?(this.q.loading.show(),_.api.patch("user/profession",{id:this.professionId,profession:this.professionModel,subProfession:this.skillsModel,skillLevel:this.ratingModel}).then((s=>{this.q.loading.hide(),console.log(s.data),s.data.success?(this.$q.notify({message:s.data.msg,color:"green"}),this.$router.push("/profile")):this.$q.notify({message:s.data.msg,color:"red"})})).catch((s=>{this.q.loading.hide(),console.log(s)}))):_.api.post("user/addprofession",{profession:this.professionModel,subProfession:this.skillsModel,skillLevel:this.ratingModel}).then((s=>{this.q.loading.hide(),console.log(s.data),s.data.success?(this.$q.notify({message:"Successfully added!",color:"green"}),this.$router.push(`/profile/${this.store.user.slug}`)):this.$q.notify({message:s.data.msg,color:"red"})})).catch((s=>{console.log(s),this.q.loading.hide()}))},editProfession(s){this.professionId=s._id,this.showProfessions=!1,this.showAddProfession=!0,this.isUpdate=!0,this.professionModel=s.profession,this.subProfessionModel=s.subProfession},deleteProfession(s){_.api["delete"](`/user/profession/${s._id}`).then((s=>{console.log(s.data),this.getUser()}))},cancelEdit(){this.isUpdate=!1,this.showProfessions=!0,this.showAddProfession=!1},getUser(){_.api.get(`user/single/${this.store.user.slug}`).then((s=>{this.user=s.data.user,this.professionsLength=this.user.professions.length})).catch((s=>{console.log(s)}))}},data(){return{user:{}}},mounted(){setTimeout((()=>{this.getUser()}),400)}});var V=o(1639),H=o(627),$=o(8879),S=o(7691),Z=o(1570),A=o(8326),D=o(6997),L=o(9984),Q=o.n(L);const z=(0,V.Z)(W,[["render",P]]),F=z;Q()(W,"components",{QPageSticky:H.Z,QBtn:$.Z,QChip:S.Z,QRating:Z.Z,QForm:A.Z,QSelect:D.Z})}}]);